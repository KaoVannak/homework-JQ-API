<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Homework Jquery</title>
    <script src="Jquery.js"></script>
    <link href="https://cdn.jsdelivr.net/npm/sweetalert2@11/dist/sweetalert2.min.css" rel="stylesheet">
    <script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>
    <script src="https://kit.fontawesome.com/eddf6a2689.js" crossorigin="anonymous"></script>
    <style>
      body {
        margin: 0;
        font-family: Arial, sans-serif;
        background: #eef3f9;
      }

   
      nav {
        background: #34495e;
        color: white;
        display: flex;
        justify-content: space-between;
        align-items: center;
        padding: 15px 30px;
        position: relative;
      }

      nav .menu {
        display: flex;
        align-items: center;
        justify-content: space-between;
        width: 100%;
        background: transparent;
        margin: 0;
        padding: 0;
      }

      nav .menu .logo {
        margin-right: 40px;
      }

      nav .menu ul {
        flex: 1;
        display: flex;
        justify-content: center;
      }

      nav .menu ul li {
        margin-left: 30px;
      }

      nav .menu .logo {
        font-size: 22px;
        font-weight: bold;
        margin-left: 100px;
      }

      nav .menu ul {
        list-style: none;
        display: flex;
        margin: 0;
        padding: 0;
      }

      nav .menu ul li {
        margin-left: 30px;
      }

      nav .menu ul li a {
        text-decoration: none;
        color: white;
        font-weight: 500;
        transition: 0.3s;
      }

      nav .menu ul li a:hover {
        color: #f39c12;
      }

      .cart-box {
        position: relative;
        cursor: pointer;
        font-size: 20px;
        margin-left: 40px;
        margin-right: 100px;
      }

      .badge {
        position: absolute;
        top: -8px;
        right: -10px;
        background: #e74c3c;
        color: white;
        font-size: 13px;
        padding: 2px 6px;
        border-radius: 50%;
      }

      .container {
        width: 85%;
        margin: 30px auto; 
        display: grid;
        grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
        gap: 20px;
      }

      
      .product-container {
        background: white;
        border-radius: 12px;
        box-shadow: 0 5px 15px rgba(0, 0, 0, 0.1);
        overflow: hidden;
        position: relative;
        display: flex;
        flex-direction: column;
        align-items: center;
        text-align: center;
        transition: 0.3s;
        padding-bottom: 15px;
      }

      .product-container:hover {
        transform: translateY(-5px);
      }

      .product-container img {
        width: 100%;
        height: 180px;
        object-fit: contain;
        display: block;
        position: relative;
        margin-top: 40px;
      }

      
      .category {
        position: absolute;
        top: 10px;
        left: 10px;
        font-size: 12px;
        font-weight: 600;
        color: #fff;
        background: rgba(
          0,
          0,
          0,
          0.4
        );
        padding: 3px 8px;
        border-radius: 6px;
        text-transform: uppercase;
        letter-spacing: 1px;
      }

      .product-container h3 {
        font-size: 16px;
        margin: 10px 0 5px;
      }

      .price {
        font-size: 18px;
        font-weight: bold;
        color: #27ae60;
        margin: 5px 0 12px;
      }

      .btnaddcart {
        background: #3498db;
        border: none;
        color: white;
        padding: 10px 15px;
        border-radius: 6px;
        cursor: pointer;
        transition: 0.3s;
      }

      .btnaddcart:hover {
        background: #264eff;
      }

     
      .overlay {
        display: none;
        position: fixed;
        z-index: 900;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        background: rgba(0, 0, 0, 0.4);
      }

      
      .cart-panel {
        position: fixed;
        top: 0;
        right: -400px;
        width: 350px;
        height: 100%;
        background: #f7f9fb;
        box-shadow: -3px 0 6px rgba(0, 0, 0, 0.2);
        transition: 0.3s;
        padding: 20px;
        overflow-y: auto;
        z-index: 1000;
        display: flex;
        flex-direction: column;
      }

      .cart-panel h2 {
        margin: 0 0 20px;
        font-size: 20px;
        display: flex;
        justify-content: space-between;
        align-items: center;
      }

      .close-btn {
        cursor: pointer;
        font-size: 24px;
        color: #e74c3c;
      }

      .item {
        display: flex;
        background: #fff;
        border-radius: 10px;
        box-shadow: 0 2px 6px rgba(0, 0, 0, 0.1);
        margin-bottom: 15px;
        overflow: hidden;
      }

      .item img {
        width: 80px;
        height: 80px;
        object-fit: contain;
        margin-right: 10px;
        padding: 5px;
      }

      .item div {
        flex: 1;
        padding: 10px;
      }

      .item h4 {
        margin: 0 0 5px;
        font-size: 14px;
        font-weight: 600;
      }

      .item p {
        margin: 0;
        font-size: 13px;
        color: #27ae60;
      }

      .btnRemove {
        background: #e74c3c;
        color: #fff;
        border: none;
        padding: 5px 10px;
        border-radius: 5px;
        cursor: pointer;
        margin-top: 8px;
        font-size: 12px;
      }

      .btnRemove:hover {
        background: #c0392b;
      }

      #total {
        font-size: 18px;
        font-weight: bold;
        margin-top: 10px;
        text-align: right;
      }
    </style>
  </head>
  <body>
    <nav>
      <div class="menu">
        <div class="logo">KAO VANNAK</div>
        <ul>
          <li><a href="#">Home</a></li>
          <li><a href="#">Shop</a></li>
          <li><a href="#">About</a></li>
          <li><a href="#">Contact</a></li>
        </ul>
        <div class="cart-box">
            Card  
          <i class="fa-solid fa-cart-shopping"></i>
          <span class="badge">0</span>
        </div>
      </div>
    </nav>

    <div class="container" id="product-list"></div>

    <div class="overlay"></div>

    <div class="cart-panel">
      <h2>Your Cart <span class="close-btn">&times;</span></h2>
      <div id="cart-items"></div>
      <p id="total">Total price : $ 0</p>
    </div>


  </body>

  
    
    <script>
      $(document).ready(function () {
        let num = 0;
        let item_price = 0;
        let close_panel = $(".overlay");
        // Fetch products
        $.get("https://fakestoreapi.com/products", function (products) {
          products.forEach((product) => {
            $("#product-list").append(`
          <div class="product-container">
            <div class="category">${product.category}</div>
            <img src="${product.image}" alt="${product.title}">
            <h3>${product.title}</h3>
            <div class="price">$${product.price}</div>
            <button class="btnaddcart" data-title="${product.title}" data-price="${product.price}" data-img="${product.image}">Add to Cart</button>
          </div>
        `);
          });
        });

        // Add to cart
        $(document).on("click", ".btnaddcart", function () {
          let title = $(this).data("title");
          let priceItem = parseFloat($(this).data("price"));
          let img = $(this).data("img");

          let item = `
          <div class="item">
            <img src="${img}" alt="">
            <div>
              <h4>${title}</h4>
              <p>Price: $${priceItem}</p>
              <button type="button" class="btnRemove" data-price="${priceItem}">Remove</button>
            </div>
          </div>
        `;
          $("#cart-items").prepend(item);

          item_price += priceItem;
          $("#total").text("Total price : $ " + item_price.toFixed(2));
          $(".badge").html(++num);



         Swal.fire({
            icon: 'success',
            title: 'Added to Cart',
            text: `Product has been added to your cart Successfully.`,
            timer: 1500,
            showConfirmButton: false
        });


        });

        // Remove item
        $(document).on("click", ".btnRemove", function () {
        let $item = $(this).closest(".item");
        let priceItem = parseFloat($(this).data("price"));

        Swal.fire({
            title: 'Remove from cart?',
            text: 'Are you sure you want to remove this product?',
            icon: 'warning',
            showCancelButton: true,
            confirmButtonText: 'Yes, remove it!',
            cancelButtonText: 'Cancel'
        }).then((result) => {
                if (result.isConfirmed) {
                $item.remove();
                num--;
                item_price -= priceItem;
                $("#total").text("Total price : $ " + item_price.toFixed(2));
                $(".badge").html(num);

                Swal.fire('Removed!', 'Product has been removed.', 'success');
                }
            });
        });

        // show cart panel
        $(".cart-box").click(function () {
          $(".cart-panel").css("right", "0");
          $(".overlay").fadeIn();
        });

        // hide cart panel
        $(".close-btn").click(function () {
          $(".cart-panel").css("right", "-400px");
          $(".overlay").fadeOut();
        });

        close_panel.click(function () {
          $(".cart-panel").css("right", "-400px");
          $(".overlay").fadeOut();
        });
      });
    </script>
</html>
